<app-navbar></app-navbar>

<h2 class="text-xl font-semibold text-gray-900 dark:text-white">User Management</h2>
<div class="relative overflow-x-auto shadow-md sm:rounded-lg my-4 p-4">
  <app-user-table 
    class="w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400"
    [users]="users" 
    (deleteUser)="handleDeleteUser($event)" 
    (editUser)="handleEditUser($event)">
  </app-user-table>
</div>

<div *ngIf="currentUser" class="bg-white shadow-md sm:rounded-lg p-6 dark:bg-gray-800">
  <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Edit User</h3>
  
  <form (ngSubmit)="saveUser()" class="space-y-4">
    
    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Username:
        <input 
          [(ngModel)]="currentUser.username" 
          name="username" 
          required 
          class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
      </label>
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Password:
        <input 
          [(ngModel)]="currentUser.password" 
          name="password" 
          required 
          type="password" 
          class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
      </label>
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Role:
        <select 
          [(ngModel)]="currentUser.role" 
          name="role" 
          required 
          class="mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
          <option value="admin">Admin</option>
          <option value="supervisor">Supervisor</option>
          <option value="agente">Agente</option>
          <option value="cliente">Cliente</option>
        </select>
      </label>
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">
        Active:
        <input 
          type="checkbox" 
          [(ngModel)]="currentUser.isActive" 
          name="isActive" 
          class="mt-1 rounded text-indigo-600 shadow-sm sm:text-sm border-gray-300 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white">
      </label>
    </div>
    
    <div class="flex justify-end space-x-2">
      <button 
        type="submit"
        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600">
        Save
      </button>
      <button 
        type="button" 
        (click)="cancelEdit()"
        class="inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-gray-700 bg-white shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700">
        Cancel
      </button>
    </div>
    
  </form>
</div>
